extends layout

block content
  div#drop-box
    input#file-input(type="file" multiple="")
  //div#initialMsg("v-bind:style"="{ display: noReports }")
      p You have no email reports currently. Upload an email to get started!
  div#emails("v-show"="campaigns", "v-bind:style"="{ display: emailReport }")
    div(class="email buttons")
        button("v-for"="campaign in campaigns", "v-bind:key"="campaign", "v-bind:class"="['email-button', { active: currentCampaign === campaign }]", "v-on:click"="currentCampaign = campaign") {{ campaign }}
    div(class="email report")
        div(class="alert", "v-if"="needsUpdating")
            i The data for this email needs to be updated.
        table
            tbody
                tr("v-for"="(value, key) in report[currentCampaign]")
                    div(class="headers")
                        th {{ key }}
                    div(class="data")
                        td#alertDate("v-if"="key === 'Sent'") {{ value }}
                        td("v-else-if"="isString(value)") {{ value }}
                        td("v-else")
                            div("v-for"="subValue in value")
                                p("v-for"="item in subValue") {{ item | formatItem }} &nbsp;


  script(type="text/javascript" src="scripts/util/dropZone.js")
  script(type="text/javascript" src="scripts/util/CSVParser.js")
  script(type="text/javascript" src="scripts/index.js")
  script(type="text/javascript" src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js")
  script(type="text/javascript" src="scripts/util/vueScripts.js")